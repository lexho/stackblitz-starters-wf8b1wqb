let blocks=[],blocks1=[],nextHeading=2;function addTextBlock(){var e=document.getElementById("formblocks"),t=document.createElement("div"),r=document.createElement("label"),n=document.createElement("input"),o=document.createElement("div"),i=(t.setAttribute("class","mb-3"),r.setAttribute("for","heading"+nextHeading),r.setAttribute("class","form-label"),r.innerText="Ãœberschrift"+nextHeading,n.setAttribute("id","heading"+nextHeading),n.setAttribute("type","text"),n.setAttribute("name","heading"+nextHeading),n.setAttribute("class","form-control"),n.setAttribute("aria-describedby","heading"),n.setAttribute("value","Block"+nextHeading),n.setAttribute("required",""),document.createElement("div")),i=(i.setAttribute("class","valid-feedback"),i.innerText="Looks good!",t.appendChild(r),t.appendChild(n),t.appendChild(o),e.appendChild(t),document.createElement("div")),r=(i.setAttribute("id","textbox"+nextHeading),i.setAttribute("class","mb-3"),document.createElement("label")),o=(r.setAttribute("for","text"+nextHeading),r.setAttribute("class","form-label"),r.innerText="Text",document.createElement("textarea")),t=(o.setAttribute("id","text"+nextHeading),o.setAttribute("name","text"+nextHeading),o.setAttribute("class","form-control"),o.setAttribute("aria-label","text"),o.setAttribute("required",""),o.innerText="Another Textblock."+nextHeading,document.createElement("div")),r=(t.setAttribute("class","valid-feedback"),t.innerText="Looks good!",i.appendChild(r),i.appendChild(o),i.appendChild(t),e.appendChild(i),{type:"text",heading:n,text:o});blocks1.push(r),console.log(JSON.stringify(blocks1)),nextHeading++}let i=1;function addGalleryBlock(){var e=document.getElementById("submit"),e=(e.setAttribute("class","btn btn-secondary"),e.setAttribute("onClick",""),document.createElement("fotosbox")),t=(e.setAttribute("id","fotosbox"),e.setAttribute("class","mb-3"),document.createElement("label")),r=(t.setAttribute("for","fotos"),t.setAttribute("class","form-label"),t.innerText="Gallery "+i,document.createElement("br")),n=document.createElement("div"),o=document.createElement("label"),s=(o.setAttribute("for","web-worker"+i),document.createElement("span")),s=(s.setAttribute("id","web-worker"+i+"-progress"),o.appendChild(s),document.createElement("input")),s=(s.setAttribute("id","web-worker"+i),s.setAttribute("type","file"),s.setAttribute("multiple","multiple"),s.setAttribute("accept","image/*"),s.setAttribute("onchange",'compressImages(event, true, "#web-worker'+i+'");'),o.appendChild(s),n.appendChild(o),document.createElement("hr"));e.appendChild(t),e.appendChild(r),e.appendChild(n),e.appendChild(s);document.getElementById("formblocks").appendChild(e),console.log(JSON.stringify(blocks1));o={type:"gallery",id:i,images:[]};blocks1.push(o),i++,images.push([]),images[0]=[]}let selectedVersion="latest",workers=[],filenames=[],progresses=[];function compressImage(o,i,s){return new Promise((t,e)=>{var r=s+"-progress",n=(document.querySelector(s+"-log"),document.querySelector(r)),r=(console.log("image to compress: ",o.name),imageCompression.getExifOrientation(o).then(function(e){console.log("ExifOrientation",e)}),controller="undefined"!=typeof AbortController&&new AbortController,{maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:i,onProgress:function(e){progresses[o.name]=e;let t=0;for(var r of filenames){if(void 0===progresses[r])break;r=progresses[r];t+=r}t/=filenames.length,n.innerHTML="("+Math.round(t)+"%)"},preserveExif:!0,libURL:"https://cdn.jsdelivr.net/npm/browser-image-compression@"+selectedVersion+"/dist/browser-image-compression.js"});controller&&(r.signal=controller.signal),imageCompression(o,r).then(function(e){perpareUploadToServer(e,o.name,s),t()}).catch(function(e){alert(e.message),reh()})})}function abort(){controller&&controller.abort(new Error("I just want to stop"))}let formData=new FormData,counter=1;function perpareUploadToServer(e,t){formData.append("photos",e,t),counter++}